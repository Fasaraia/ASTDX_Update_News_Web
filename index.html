<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASTDX Update Log</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@900&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

  <style>
    :root {
      --bg-dark: #121212;
      --bg-light-dark: #1e1e1e;
      --card-bg: #2a2a2a;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --accent-green: #00FFA3;
      --border-color: #444;
      --font-main: 'Fredoka', sans-serif;
      --font-jp: 'Noto Sans JP', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-main);
      color: var(--text-primary);
      background-color: var(--bg-dark);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .background-design {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; z-index: -1;
      background-color: var(--bg-dark);
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 49px, rgba(255, 255, 255, 0.04) 50px),
        repeating-linear-gradient(90deg, transparent, transparent 49px, rgba(255, 255, 255, 0.04) 50px),
        radial-gradient(ellipse at 50% 0%, rgb(0, 0, 0) 0%, transparent 70%),
        linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-light-dark) 100%);
      background-size: 50px 50px, 50px 50px, 100% 100%, 100% 100%;
    }

    main { width: 100%; max-width: 1200px; }
    
    .content-card {
      background-color: var(--card-bg);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      border: 1px solid var(--border-color);
      position: relative;
      overflow: hidden;
    }

    .hiragana-background {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%; z-index: 1;
      background: linear-gradient(to right, #1d1d1d, #000000); 
    }
    .hiragana-background::before {
      content: ''; position: absolute; top: 0; left: 0;
      width: 100%; height: 100%; z-index: 2;
      --stripe-opacity: 0.6;
      background: repeating-linear-gradient(135deg, transparent, transparent 7px, rgba(0, 0, 0, var(--stripe-opacity)) 7px, rgba(0, 0, 0, var(--stripe-opacity)) 12px);
    }
    .hiragana-background .text-container {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 3; display: flex; flex-direction: column; justify-content: center;
    }
    .hiragana-background .text-layer {
      width: 200%; display: flex; font-family: var(--font-jp);
      font-weight: 900; white-space: nowrap; user-select: none;
      line-height: 0.9; rotate: -10deg; font-size: 20rem;
      background: linear-gradient(45deg, #ffffff, #303030);
      -webkit-background-clip: text; background-clip: text;
      color: transparent; opacity: 0.08;
    }
    .hiragana-background .text-layer span { display: block; width: 50%; padding: 0 20px; }
    .hiragana-background .layer-1 { animation: scroll-right 40s linear infinite; }
    .hiragana-background .layer-2 { animation: scroll-left 40s linear infinite; }
    .hiragana-background .layer-3 { animation: scroll-right 40s linear infinite; }
    .hiragana-background .layer-4 { animation: scroll-left 40s linear infinite; }

    @keyframes scroll-right { from { transform: translateX(-50%); } to { transform: translateX(0); } }
    @keyframes scroll-left { from { transform: translateX(0); } to { transform: translateX(-50%); } }

    .content-wrapper {
      position: relative; z-index: 5;
      padding: 40px; display: flex;
      flex-direction: column; gap: 1.5rem;
    }

    .music-player {
      position: absolute; top: 20px; right: 20px;
      display: flex; align-items: center; gap: 12px;
      background: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      padding: 10px 15px; border-radius: 8px;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); z-index: 10;
    }
    .music-player button {
      background: none; border: none; font-size: 1.2rem;
      color: var(--text-primary); cursor: pointer;
      transition: color 0.2s ease, transform 0.2s ease;
    }
    .music-player button:hover { color: var(--accent-green); transform: scale(1.1); }

    .main-header {
      font-size: clamp(3rem, 6vw, 4.5rem); font-weight: 700;
      line-height: 1.2; margin: 0; opacity: 0;
    }
    .main-header .letter {
      display: inline-block; -webkit-text-fill-color: transparent;
      background: linear-gradient(45deg, #009dff, #087dd7, #009dff, #087dd7);
      -webkit-background-clip: text; background-clip: text;
      background-size: 300% auto;
      animation: gradient-flow 6s linear infinite;
    }
    @keyframes gradient-flow {
      0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
    }

    .sub-text {
      font-size: clamp(1.2rem, 3vw, 1.5rem); font-weight: 400;
      margin: 0; color: var(--text-secondary); opacity: 0;
    }

    .box-container {
      display: flex; flex-direction: column;
      gap: 20px; margin-top: 1rem;
    }

    .content-box {
      background-color: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      border: 1px solid var(--border-color); border-radius: 8px;
      padding: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); opacity: 0;
    }
    .content-box h2 {
      margin-top: 0; font-weight: 600; color: var(--accent-green);
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 10px; margin-bottom: 15px;
      text-transform: uppercase; letter-spacing: 1px;
    }
    .content-box p {
      font-size: 1.1rem; line-height: 1.6;
      font-weight: 300; margin: 0.5rem 0;
    }
    
    /* --- NEW STYLES for Unit Grid --- */
    .unit-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 1rem;
      padding-top: 1rem;
    }
    .unit-card {
      display: flex; flex-direction: column;
      align-items: center; gap: 0.5rem;
      padding: 0.75rem; border: 2px solid transparent;
      border-radius: 10px; background-color: var(--bg-dark);
      transition: all 0.2s ease-in-out; text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      opacity: 0; /* Hide for animation */
    }
    .unit-card:hover {
      border-color: var(--accent-green);
      transform: translateY(-3px);
    }
    .unit-card img {
      width: 90px; height: 90px;
      object-fit: cover; border-radius: 8px;
    }
    .unit-card p {
      font-size: 0.85rem; font-weight: 500;
      color: var(--text-primary); text-transform: capitalize;
    }
    /* --- END of Unit Grid Styles --- */

    @media (max-width: 768px) {
      body { padding: 1rem; }
      .content-wrapper { padding: 25px; }
      .hiragana-background .text-layer { font-size: 12rem; }
    }
  </style>
</head>
<body>
  
  <div class="background-design"></div>

  <main>
    <section class="content-card">
      <div class="hiragana-background" translate="no">
        <div class="text-container">
          <div class="text-layer layer-1"><span>あいうえおかきくけこさしすせそ</span></div>
          <div class="text-layer layer-2"><span>タチツテトナニヌネノハヒフヘホ</span></div>
          <div class="text-layer layer-3"><span>マミムメモヤユヨラリルレロ</span></div>
          <div class="text-layer layer-4"><span>ワヲンアイウエオカキクケコサ</span></div>
        </div>
      </div>
      
      <audio id="audio-player" src="assets/All Star Tower Defense Lobby Music (Roblox) [LaTale Music - May Be Happy].mp3" loop></audio>
      <div class="music-player">
        <button id="play-pause">▶</button>
      </div>

      <div class="content-wrapper">
        <h1 class="main-header">ASTDX Update Log</h1>
        <p class="sub-text">Made by the ASTDX Questions Team</p>
        
        <div class="box-container">
          <div class="content-box">
            <h2>New Unit Additions</h2>
            <div id="new-units-grid" class="unit-grid"></div>
          </div>
          
          <!-- Other changelog sections -->
          <div class="content-box">
          </div>

          <div class="content-box">
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Make sure you have this file -->
  <script src="assets/musicplayer.js"></script>

  <!-- IMPORTANT: Load the new unit data file BEFORE the main script -->
  <script src="changelog-units.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const populateNewUnits = () => {
        const gridContainer = document.getElementById('new-units-grid');
        if (!gridContainer) return; 
        
        
        if (typeof newUnitsData !== 'undefined' && newUnitsData.length > 0) {
          const cardsHTML = newUnitsData.map(unit => `
            <div class="unit-card">
              <img src="${unit.image}" alt="${unit.name}">
              <p>${unit.name}</p>
            </div>
          `).join('');
          
          gridContainer.innerHTML = cardsHTML;
        } else {
          gridContainer.innerHTML = "<p>No new units in this update.</p>";
        }
      };
      
      populateNewUnits(); 

      // --- ANIME.JS ANIMATION SEQUENCE ---
      const header = document.querySelector('.main-header');
      header.innerHTML = header.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
      
      const tl = anime.timeline({
        easing: 'easeOutExpo',
        duration: 750
      });

      tl.add({
        targets: '.main-header',
        opacity: [0, 1], duration: 200
      })
      .add({
        targets: '.main-header .letter',
        translateY: [20, 0], opacity: [0, 1],
        duration: 1200, delay: anime.stagger(50)
      }, '-=100')
      .add({
        targets: '.sub-text',
        translateY: [15, 0], opacity: [0, 1],
        duration: 800,
      }, '-=1000')
      .add({
        targets: '.content-box',
        translateY: [20, 0], opacity: [0, 1],
      }, '-=700')
      // Add a new animation step for the unit cards inside the grid
      .add({
        targets: '.unit-card',
        translateY: [15, 0],
        opacity: [0, 1],
        delay: anime.stagger(80) // Stagger the appearance of each card
      }, '-=800'); // Overlap this animation with the content box animation
    });
  </script>
</body>
</html>