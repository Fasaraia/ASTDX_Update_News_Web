    :root {
      --bg-dark: #121212;
      --bg-light-dark: #1e1e1e;
      --card-bg: #2a2a2a;
      --text-primary: #e0e0e0;
      --text-secondary: #a0a0a0;
      --accent-green: #00FFA3;
      --accent-blue: #007bff;
      --accent-red: #ff4d4d;
      --border-color: #444;
      --font-main: 'Fredoka', sans-serif;
      --font-jp: 'Noto Sans JP', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-main);
      color: var(--text-primary);
      background-color: var(--bg-dark);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 4rem 2rem;
    }

    #loader-wrapper {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: var(--bg-dark); display: flex; flex-direction: column;
      justify-content: center; align-items: center; z-index: 9999;
      transition: opacity 0.5s ease-in-out;
    }
    #loader-bar-container {
      width: 80%; max-width: 400px; height: 10px;
      background-color: var(--border-color); border-radius: 5px; overflow: hidden;
    }
    #loader-progress {
      width: 0%; height: 100%; background-color: var(--accent-green);
      border-radius: 5px; transition: width 0.2s linear;
    }
    #loader-text { margin-top: 1rem; font-size: 1rem; color: var(--text-secondary); }

    main {
      width: 100%; max-width: 1400px; opacity: 0;
      visibility: hidden; transition: opacity 0.5s ease;
    }
    main.loaded { opacity: 1; visibility: visible; }

    .background-design {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1; background-color: var(--bg-dark);
      background-image: repeating-linear-gradient(0deg, transparent, transparent 49px, rgba(255, 255, 255, 0.04) 50px),
        repeating-linear-gradient(90deg, transparent, transparent 49px, rgba(255, 255, 255, 0.04) 50px),
        radial-gradient(ellipse at 50% 0%, rgb(0, 0, 0) 0%, transparent 70%),
        linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-light-dark) 100%);
      background-size: 50px 50px, 50px 50px, 100% 100%, 100% 100%;
    }

    .layout {
        display: flex;
        align-items: flex-start;
    }

    .content-card {
      background-color: var(--card-bg); border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-color);
      position: relative; overflow: hidden;
    }

    .hiragana-background {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
      background: linear-gradient(to right, #1d1d1d, #000000);
    }
    .hiragana-background::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2;
      --stripe-opacity: 0.6;
      background: repeating-linear-gradient(135deg, transparent, transparent 7px, rgba(0, 0, 0, var(--stripe-opacity)) 7px, rgba(0, 0, 0, var(--stripe-opacity)) 12px);
    }
    .hiragana-background .text-container {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 3; display: flex; flex-direction: column; justify-content: center;
    }
    .hiragana-background .text-layer {
      width: 200%; display: flex; font-family: var(--font-jp); font-weight: 900;
      white-space: nowrap; user-select: none; line-height: 0.9;
      rotate: -10deg; font-size: 50rem;
      background: linear-gradient(45deg, #ffffff, #303030);
      -webkit-background-clip: text; background-clip: text; color: transparent; opacity: 0.08;
    }
    .hiragana-background .text-layer span { display: block; width: 50%; padding: 0 20px; }
    .hiragana-background .text-layer:nth-child(odd) { animation: scroll-right 40s linear infinite; }
    .hiragana-background .text-layer:nth-child(even) { animation: scroll-left 40s linear infinite; }
    @keyframes scroll-right { from { transform: translateX(-50%); } to { transform: translateX(0); } }
    @keyframes scroll-left { from { transform: translateX(0); } to { transform: translateX(-50%); } }

    .content-wrapper {
      position: relative; z-index: 5; padding: 40px;
      display: flex-start; flex-direction: column; gap: 1rem;
    }

    .audio-wrapper {
        position: sticky;
        padding: 10px;
        top: 20px;
        margin-left: 20px;
        height: fit-content;
        display: flex; flex-direction: column-reverse; align-items: center;
        justify-content: flex-start;
        background: rgba(30,30,30,0.7);
        border-radius: 8px;
        border: 1px solid var(--border-color);
    }

    .music-player {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #volume-slider {
        writing-mode: bt-lr; /* vertical slider */
        -webkit-appearance: slider-vertical; /* Chrome/Safari */
        width: 8px;
        height: 100px;
        background: var(--border-color);
        border-radius: 4px;
        cursor: pointer;
    }


    .music-player button {
      background: none; border: none; font-size: 1.2rem; color: var(--text-primary);
      cursor: pointer; transition: color 0.2s ease, transform 0.2s ease;
      width: 24px; height: 24px;
    }

    .music-player button:hover { color: var(--accent-green); transform: scale(1.1); }

    .main-header {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
      font-weight: 700; line-height: 1.1; margin: 0; opacity: 0;
    }
    .sub-text {
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      font-weight: 400; margin: 0; color: var(--text-secondary); opacity: 0;
      margin-bottom: 2rem;
    }

    .main-header .letter {
      display: inline-block; -webkit-text-fill-color: transparent;
      background: linear-gradient(45deg, #009dff, #087dd7, #009dff, #087dd7);
      -webkit-background-clip: text; background-clip: text; background-size: 300% auto;
      animation: gradient-flow 6s linear infinite;
    }
    @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    .content-box {
      background-color: rgba(30, 30, 30, 0.7); backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px); border: 1px solid var(--border-color);
      border-radius: 8px; padding: 25px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); opacity: 0;
    }
    .content-box h2 {
      margin-top: 0; font-weight: 600; color: var(--accent-green);
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 10px; margin-bottom: 15px;
      text-transform: uppercase; letter-spacing: 1px;
    }
    .content-box p { font-size: 1.1rem; line-height: 1.6; font-weight: 300; margin: 0.5rem 0; }
    
    .timeline-container { display: flex; flex-direction: column; gap: 3rem; }
    .timeline-item { display: grid; grid-template-columns: 50px 1fr; gap: 20px; }
    .timeline-marker { position: relative; width: 100%; }
    .timeline-marker::before {
      content: ''; position: absolute; top: 18px; left: 50%;
      transform: translateX(-50%); width: 4px; height: 100%;
      background: var(--border-color); border-radius: 2px;
    }
    .timeline-marker::after {
      content: ''; position: absolute; top: 18px; left: 50%;
      transform: translateX(-50%) translateY(-50%); width: 22px; height: 22px;
      border-radius: 50%; background: var(--accent-green);
      border: 4px solid var(--card-bg); z-index: 1;
    }
    .update-title { font-size: 2.2rem; font-weight: 700; margin-bottom: 0.5rem; opacity: 0; }
    .update-date { color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 1rem; opacity: 0; }

    .unit-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 1rem; padding-top: 1rem;
    }
    .unit-card {
      display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
      padding: 0.75rem; border: 2px solid transparent; border-radius: 10px;
      background-color: var(--bg-dark); transition: all 0.2s ease-in-out;
      text-align: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      opacity: 0; cursor: pointer;
    }
    .unit-card:hover { border-color: var(--accent-blue); transform: translateY(-3px); }
    .unit-card.selected {
      border-color: var(--accent-green); transform: translateY(-3px);
      box-shadow: 0 0 10px rgba(0, 255, 163, 0.5);
    }
    .unit-card img { width: 90px; height: 90px; object-fit: cover; border-radius: 8px; }
    .unit-card p { font-size: 0.85rem; font-weight: 500; color: var(--text-primary); text-transform: capitalize; }

    .logo img { width: 500px; height: auto; }
    .logo { text-align: center; }

    .changelog-layout { display: grid; grid-template-columns: 2fr 1.2fr; gap: 25px; }
    .main-content-column { display: flex; flex-direction: column; gap: 25px; }

    #unit-details-panel {
      background-color: rgba(30, 30, 30, 0.7); backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px); border: 1px solid var(--border-color);
      border-radius: 8px; padding: 25px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      opacity: 0; position: sticky; top: 4rem; align-self: start;
      /* max-height is now set by JavaScript */
      overflow-y: auto;
      overflow-x: hidden;
    }
    /* Custom Scrollbar for Details Panel */
    #unit-details-panel::-webkit-scrollbar {
      width: 10px;
    }
    #unit-details-panel::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }
    #unit-details-panel::-webkit-scrollbar-thumb {
      background-color: var(--border-color);
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
    }
    #unit-details-panel::-webkit-scrollbar-thumb:hover {
      background-color: var(--accent-green);
    }
    .details-placeholder { display: flex; justify-content: center; align-items: center; height: 100%; color: var(--text-secondary); font-style: italic; }
    .details-content-wrapper { display: flex; flex-direction: column; gap: 1.5rem; }
    
    .details-header { display: flex; gap: 1.5rem; align-items: center; }
    .details-title-group { display: flex; flex-direction: column; gap: 0.25rem; }
    #details-unit-image { width: 120px; height: 120px; object-fit: cover; border-radius: 10px; border: 1px solid var(--border-color); flex-shrink: 0; }
    #details-unit-name { font-size: 2.5rem; font-weight: 700; color: var(--text-primary); text-transform: uppercase; margin: 0; line-height: 1.1; }
    .details-subheader { font-size: 1rem; font-weight: 600; text-transform: uppercase; color: var(--text-secondary); margin: 0; }
    .details-subheader span { display: inline-block; }
    .details-subheader .subheader-placement { color: #4dc949; }
    
    .details-tags-container { display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .details-tag {
      background-color: var(--bg-dark); border: 1px solid var(--border-color); border-radius: 6px;
      padding: 0.4rem 1rem; font-size: 0.9rem; font-weight: 500;
      display: inline-flex; align-items: center; gap: 0.5rem;
    }
    .tag-element.element-red { border-color: #ff8080; color: #ff8080; }
    .tag-element.element-green { border-color: #99ffc7; color: #99ffc7; }
    .tag-element.element-blue { border-color: #99c7ff; color: #99c7ff; }
    .tag-element.element-purple { border-color: #cfc2ff; color: #cfc2ff; }
    .tag-element.element-orange { border-color: #ffc799; color: #ffc799; }
    .tag-method { border-color: var(--accent-blue); color: var(--accent-blue); }
    
    .rarity-unbound { background-image: linear-gradient(45deg, #c0392b, #8e44ad); -webkit-background-clip: text; background-clip: text; color: transparent; }
    .rarity-5-star {
      background-image: linear-gradient(45deg, #ff2400, #e8b71d, #1de840, #1ddde8, #2b1de8, #dd00f3, #ff2400);
      background-size: 400% 100%; -webkit-background-clip: text; background-clip: text;
      color: transparent; animation: rainbow-flow 5s ease-in-out infinite;
    }
    @keyframes rainbow-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    .highlight-text-green { color: var(--accent-green); font-weight: 500; }
    .highlight-text-blue { color: var(--accent-blue); font-weight: 500; }
    .highlight-text-red { color: var(--accent-red); font-weight: 500; }
    .highlight-text-yellow { color:#ffee00; font-weight: 500; }
    .highlight-text-purplegradient { background-image: linear-gradient(45deg, #c0392b, #8e44ad); -webkit-background-clip: text; background-clip: text; color: transparent; font-weight: 500; }
    .highlight-text-orangegradient { background-image: linear-gradient(45deg, #c9461e, #e4964e); -webkit-background-clip: text; background-clip: text; color: transparent; font-weight: 500; }
    .highlight-text-bluegradient { background-image: linear-gradient(45deg, #1d86e8, #1ddde8); -webkit-background-clip: text; background-clip: text; color: transparent; font-weight: 500; }

    .highlight-decelerate { background-color: #f0ad4e; color: #1e1e1e; font-weight: 600; padding: 2px 5px; border-radius: 4px; }
    .highlight-explosive { background-color: #d9534f; color: #e0e0e0; font-weight: 600; padding: 2px 5px; border-radius: 4px; }
    .highlight-powerful { background-color: #C70039; color: #e0e0e0; font-weight: 600; padding: 2px 5px; border-radius: 4px; }
    .highlight-rage { background-color: #900C3F; color: #e0e0e0; font-weight: 600; padding: 2px 5px; border-radius: 4px; }
    .highlight-regenerator { background-color: #5cb85c; color: #1e1e1e; font-weight: 600; padding: 2px 5px; border-radius: 4px; }
    .highlight-cloner { background-color: #5bc0de; color: #1e1e1e; font-weight: 600; padding: 2px 5px; border-radius: 4px; }

    #details-unit-passive { border-top: 1px solid var(--border-color); padding-top: 1.25rem; margin-top: 1.25rem; }

    #details-unit-passive { border-top: 1px solid var(--border-color); padding-top: 1.25rem; margin-top: 1.25rem; }
    #details-unit-passive > strong { display: block; font-size: 1.1rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 1rem; }
    .passive-columns { display: grid; grid-template-columns: repeat(var(--grid-columns, 1), 1fr); gap: 1.5rem; }
    .passive-column { padding: 0; border-left: 2px solid var(--border-color); padding-left: 1rem; }
    .passive-column h3 { font-size: 1rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; }
    .passive-column-content p { font-size: 0.95rem !important; color: var(--text-secondary) !important; line-height: 1.6 !important; margin: 0; }
    .passive-column-content p + p { margin-top: 0.5em; }

    


/* --- ALL KEYFRAMES (UNCHANGED FROM PREVIOUS VERSION) --- */

@keyframes glitch-top {
  2%, 64% { transform: translate(2px, -2px); opacity: 0.8; }
  4%, 60% { transform: translate(-2px, 2px); opacity: 0.8; }
  62% { transform: translate(13px, -1px) skew(-13deg); opacity: 0.8; }
}

@keyframes glitch-bottom {
  2%, 64% { transform: translate(-2px, 0); opacity: 0.8; }
  4%, 60% { transform: translate(0, 2px); opacity: 0.8; }
  62% { transform: translate(-22px, 5px) skew(21deg); opacity: 0.8; }
}

@keyframes glitch-color {
  0% { text-shadow: none; }
  5% { text-shadow: 2px 2px #ff003c, -2px -2px #00ffc3; }
  15% { text-shadow: none; }
  26% { text-shadow: -3px 0px #ff003c, 3px 0px #00ffc3; }
  35% { text-shadow: none; }
  55% { text-shadow: 0px 3px #ff003c, 0px -3px #00ffc3; }
  68% { text-shadow: none; }
  80% { text-shadow: 4px -2px #ff003c, -3px 1px #00ffc3; }
  95% { text-shadow: none; }
  100% { text-shadow: none; }
}

@keyframes glitch-font {
  0%, 14%, 20%, 48%, 60%, 84%, 90%, 100% {
    font-family: 'Fredoka', serif;
  }
  15% {
    font-family: 'Cinzel', sans-serif;
  }
  50% {
    font-family: 'Wingdings', sans-serif;
  }
  85% {
    font-family: 'Cinzel', sans-serif;
  }
}

    /* Responsive tweaks: cards still responsive but freely expand */
    @media (max-width: 768px) {
      .contract-list { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; }
      .contract-list li { padding: 0.9rem; border-radius: 10px; }
      .contract-mission-name { font-size: 1rem; }
      .contract-desc { font-size: 0.92rem; line-height: 1.4; }
    }

    @media (max-width: 1200px) {
      .changelog-layout { grid-template-columns: 1fr; }
      #unit-details-panel { position: static; top: auto; }
    }
    @media (max-width: 768px) {
      body { padding: 2rem 1rem; }
      .content-wrapper { padding: 25px; }
      .hiragana-background .text-layer { font-size: 12rem; }
      .details-header { flex-direction: column; text-align: center; }
      .timeline-item { grid-template-columns: 35px 1fr; gap: 15px; }
      .timeline-marker::before, .timeline-marker::after { left: 5px; }
    }